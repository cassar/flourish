<main>
  <h1>Dividends</h1>
  <% if @dividends.any? %>
    <% @dividends.each do |dividend| %>
      <article>
        <p><b>Date</b>: <%= dividend.created_at_formatted %></p> 
        <p><b>Amount</b>: <%= dividend.distribution.dividend_amount_formatted %></p>
        <% if dividend.issued? %>
          <%= button_to "Pay Out", pay_out_dividend_path(dividend), method: :patch %>
        <% elsif dividend.pending_pay_out? %>
          <p><b>Status</b>: <%= dividend.status.titleize %></p>
        <% elsif dividend.paid? %>
          <p><b>Status</b>: <%= dividend.status.titleize %></p>
          <details>
            <summary>Receipt</summary>
            <p><%= dividend.receipt %></p>
          </details>
        <% end %>
      </article>
    <% end %>
  <% else %>
    <article>
      <p>[No Dividends]</p>
    </article>
  <% end %>
</main>
